{% comment %}
Usage:
{% include "components/navbar.html" with
is_logged_in=True/False (required)
user_role="dokter_hewan"/"penjaga_hewan"/"staf_administrasi"/"pelatih_pertunjukan"/"pengunjung" (optional)
is_adopter=True/False (optional, only needed if user_role is "pengunjung")
%}
{% endcomment %}

{% with logged_in=is_logged_in|default:False %}
{% with role=user_role|default:"" %}
{% with adopter=is_adopter|default:False %}

<nav class="bg-primary text-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between h-16">
            <div class="flex">
                <!-- Logo -->
                <div class="flex-shrink-0 flex items-center">
                    <a href="{% if logged_in %}/dashboard/{% else %}/{% endif %}" class="font-bold text-xl">Sizopi</a>
                </div>
            </div>

            <!-- Navigation Links - Centered when logged in -->
            <div class="hidden sm:flex sm:items-center {% if logged_in %}justify-center flex-grow{% endif %}">
                {% if logged_in %}
                <!-- Common links for all logged-in users -->
                <a href="/dashboard/" class="px-3 py-2 rounded-md text-sm font-medium hover:bg-primary-80">Dashboard</a>

                <!-- Role-specific links -->
                {% if role == "dokter_hewan" %}
                <a href="/rekam-medis/" class="px-3 py-2 rounded-md text-sm font-medium hover:bg-primary-80">Rekam Medis
                    Hewan</a>
                {% elif role == "penjaga_hewan" %}
                <a href="/catatan-perawatan/"
                    class="px-3 py-2 rounded-md text-sm font-medium hover:bg-primary-80">Catatan Perawatan Hewan</a>
                {% elif role == "staf_administrasi" %}
                <a href="/kelola-pengunjung/"
                    class="px-3 py-2 rounded-md text-sm font-medium hover:bg-primary-80">Kelola Pengunjung</a>
                <a href="/kelola-adopsi/" class="px-3 py-2 rounded-md text-sm font-medium hover:bg-primary-80">Kelola
                    Adopsi</a>
                <a href="/kelola-adopter/" class="px-3 py-2 rounded-md text-sm font-medium hover:bg-primary-80">Kelola
                    Adopter</a>
                {% elif role == "pelatih_pertunjukan" %}
                <a href="/jadwal-pertunjukan/"
                    class="px-3 py-2 rounded-md text-sm font-medium hover:bg-primary-80">Jadwal Pertunjukan</a>
                {% elif role == "pengunjung" %}
                <a href="/informasi-kebun-binatang/"
                    class="px-3 py-2 rounded-md text-sm font-medium hover:bg-primary-80">Informasi Kebun Binatang</a>
                {% if adopter %}
                <a href="/hewan-adopsi/" class="px-3 py-2 rounded-md text-sm font-medium hover:bg-primary-80">Hewan
                    Adopsi</a>
                {% endif %}
                {% endif %}
                {% endif %}
            </div>

            <!-- Right side menu -->
            <div class="hidden sm:flex sm:items-center space-x-4">
                {% if logged_in %}
                <!-- Profile icon button (primary) -->
                {% include "components/button.html" with type="primary" text="" icon_class="fas fa-user" href="/pengaturan-profil/" %}

                <!-- Logout icon button (ghost) -->
                {% include "components/button.html" with type="secondary" text="" icon_class="fas fa-sign-out-alt" href="/logout/" %}

                {% else %}
                <!-- Login button (primary) -->
                {% include "components/button.html" with type="primary" text="Login" href="/login/" %}

                <!-- Register button (secondary) -->
                {% include "components/button.html" with type="secondary" text="Registrasi" href="/register/" %}

                {% endif %}
            </div>

            <!-- Mobile menu button -->
            <div class="-mr-2 flex items-center sm:hidden">
                <button type="button"
                    class="mobile-menu-button inline-flex items-center justify-center p-2 rounded-md text-white hover:bg-primary-80 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white"
                    aria-expanded="false">
                    <span class="sr-only">Open main menu</span>
                    <!-- Menu icon -->
                    <svg class="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor" aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M4 6h16M4 12h16M4 18h16" />
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- Mobile menu, show/hide based on menu state -->
    <div class="mobile-menu hidden sm:hidden">
        <div class="px-2 pt-2 pb-3 space-y-1">
            {% if logged_in %}
            <!-- Common links for all logged-in users -->
            <a href="/dashboard/"
                class="block px-3 py-2 rounded-md text-base font-medium hover:bg-primary-80">Dashboard</a>

            <!-- Role-specific links -->
            {% if role == "dokter_hewan" %}
            <a href="/rekam-medis/" class="block px-3 py-2 rounded-md text-base font-medium hover:bg-primary-80">Rekam
                Medis Hewan</a>
            {% elif role == "penjaga_hewan" %}
            <a href="/catatan-perawatan/"
                class="block px-3 py-2 rounded-md text-base font-medium hover:bg-primary-80">Catatan Perawatan Hewan</a>
            {% elif role == "staf_administrasi" %}
            <a href="/kelola-pengunjung/"
                class="block px-3 py-2 rounded-md text-base font-medium hover:bg-primary-80">Kelola Pengunjung</a>
            <a href="/kelola-adopsi/"
                class="block px-3 py-2 rounded-md text-base font-medium hover:bg-primary-80">Kelola Adopsi</a>
            <a href="/kelola-adopter/"
                class="block px-3 py-2 rounded-md text-base font-medium hover:bg-primary-80">Kelola Adopter</a>
            {% elif role == "pelatih_pertunjukan" %}
            <a href="/jadwal-pertunjukan/"
                class="block px-3 py-2 rounded-md text-base font-medium hover:bg-primary-80">Jadwal Pertunjukan</a>
            {% elif role == "pengunjung" %}
            <a href="/informasi-kebun-binatang/"
                class="block px-3 py-2 rounded-md text-base font-medium hover:bg-primary-80">Informasi Kebun
                Binatang</a>
            {% if adopter %}
            <a href="/hewan-adopsi/" class="block px-3 py-2 rounded-md text-base font-medium hover:bg-primary-80">Hewan
                Adopsi</a>
            {% endif %}
            {% endif %}

            <!-- User options -->
            <a href="/pengaturan-profil/"
                class="block px-3 py-2 rounded-md text-base font-medium hover:bg-primary-80">Pengaturan Profil</a>
            <a href="/logout/" class="block px-3 py-2 rounded-md text-base font-medium hover:bg-primary-80">Logout</a>
            {% else %}
            <!-- Guest links -->
            <a href="/login/" class="block px-3 py-2 rounded-md text-base font-medium hover:bg-primary-80">Login</a>
            <a href="/register/"
                class="block px-3 py-2 rounded-md text-base font-medium hover:bg-primary-80">Registrasi</a>
            {% endif %}
        </div>
    </div>
</nav>

<!-- Add JavaScript for mobile menu toggle -->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const mobileMenuButton = document.querySelector('.mobile-menu-button');
        const mobileMenu = document.querySelector('.mobile-menu');

        mobileMenuButton.addEventListener('click', function () {
            mobileMenu.classList.toggle('hidden');
        });
    });
</script>

{% endwith %}
{% endwith %}
{% endwith %}